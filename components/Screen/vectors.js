import React, { useEffect, useState } from 'react';
import styles from './styles.module.scss';
import Screen from "./index";
import { InfoCounter } from "../InfoCounter";

export function WideScreen({initialState}) {
    const [forceRender, setForceRender] = useState(true);
    const [randomState, setRandomState] = useState(initialState[Math.floor(Math.random() * initialState.length)]);


    useEffect(() => {
        if (!forceRender) {
            setForceRender(true);
            setRandomState(prevRandom => {
                let newRandom = initialState[Math.floor(Math.random() * initialState.length)];
                while (newRandom === prevRandom) {
                    newRandom = initialState[Math.floor(Math.random() * initialState.length)];
                }
                return newRandom;
            });
        }
    }, [forceRender])

    return (
        <div style={{position:'relative', width:'100%'}}>
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="826"
                height="495"
                fill="none"
                className={styles.newScreenVector}
                viewBox="0 0 826 495"
            >
                <path
                    fill="#BABCBE"
                    fillRule="evenodd"
                    d="M153.473 279.633h-6.367c-.835-2.328 7.18-2.392 6.367 0z"
                    clipRule="evenodd"
                ></path>
                <path
                    fill="#E5E6E7"
                    fillRule="evenodd"
                    d="M147.121 278.944c.642-1.461 5.655-1.55 6.337 0a9.847 9.847 0 01-3.169.519 9.846 9.846 0 01-3.168-.519z"
                    clipRule="evenodd"
                ></path>
                <path
                    fill="#424243"
                    fillRule="evenodd"
                    d="M150.596 277.906a.033.033 0 01-.012.023.043.043 0 01-.028.009h-.536a.045.045 0 01-.028-.009.033.033 0 01-.012-.023v-.131c0-.04.115-.072.251-.072h.114c.136 0 .251.032.251.072v.131z"
                    clipRule="evenodd"
                ></path>
                <path
                    fill="#B2B2D8"
                    d="M155.764 279.619h-10.951c-.072 0-.131.048-.131.106v.075c0 .059.059.107.131.107h10.951c.073 0 .132-.048.132-.107v-.075c0-.058-.059-.106-.132-.106z"
                ></path>
                <path fill="#AF91DB" d="M99.925 137.082h-.94v32.366h.94v-32.366z"></path>
                <path
                    fill="#B2B2D8"
                    d="M100.746 170.318v-.991a.76.76 0 00-.275-.605 1.16 1.16 0 00-.723-.273h-.602c-.275.011-.534.11-.72.274a.758.758 0 00-.273.604v.991a4.176 4.176 0 012.588 0h.005z"
                ></path>
                <path
                    fill="#AF91DB"
                    d="M103.264 173.492v3.109l-.158-.028a29.333 29.333 0 00-6.701-.068l-.598.068-.163.028v-3.109c.002-.168.016-.335.044-.501a2.88 2.88 0 01.141-.526c0-.022 0-.043.022-.064.033-.085.07-.168.114-.249a.124.124 0 010-.043l.08-.145a1.94 1.94 0 01.096-.157 3.704 3.704 0 011.068-1.044c.07-.043.14-.089.22-.128.075-.045.155-.085.237-.121.078-.04.159-.077.242-.11l.246-.086a4.216 4.216 0 012.605 0 4.129 4.129 0 011.467.851c.403.369.698.807.862 1.282.121.338.18.689.176 1.041z"
                ></path>
                <path
                    fill="#B2B2D8"
                    d="M103.265 173.492h-7.624c0-.168.015-.335.044-.501a2.88 2.88 0 01.14-.526h7.251c.123.333.187.679.189 1.027zm0 2.114v.995l-.159-.028a29.328 29.328 0 00-6.7-.068l-.598.068-.163.028v-.949a51.775 51.775 0 017.62-.046z"
                ></path>
                <path
                    fill="#404040"
                    d="M162.801 280H43.199c-1.215 0-2.199.895-2.199 2s.984 2 2.199 2H162.8c1.215 0 2.199-.895 2.199-2s-.984-2-2.199-2z"
                ></path>
                <path
                    fill="#EAEAEA"
                    d="M136.03 278.844h-28.241v.839h28.241v-.839z"
                ></path>
                <path
                    stroke="#fff"
                    strokeLinecap="round"
                    strokeMiterlimit="10"
                    strokeWidth="1.2"
                    d="M89.252 211.466h5.084M89.252 209.824h7.44"
                    opacity="0.81"
                ></path>
                <path
                    fill="#C2E7EF"
                    d="M131.984 194.724h-15.007c-.781 0-1.415.513-1.415 1.145v18.485c0 .632.634 1.144 1.415 1.144h15.007c.781 0 1.414-.512 1.414-1.144v-18.485c0-.632-.633-1.145-1.414-1.145z"
                ></path>
                <path
                    stroke="#fff"
                    strokeLinecap="round"
                    strokeMiterlimit="10"
                    strokeWidth="1.2"
                    d="M167.68 176.114h6.103M167.623 174.824h8.055M103.979 193.572h9.482"
                    opacity="0.81"
                ></path>
                <path
                    stroke="#fff"
                    strokeLinecap="round"
                    strokeMiterlimit="10"
                    strokeWidth="1.2"
                    d="M104.004 192.232h8.841M104.037 190.896h6.042"
                    opacity="0.68"
                ></path>
                <path
                    fill="#fff"
                    d="M113.884 180.015h-6.811c-1.665 0-3.014 1.091-3.014 2.438v3.372c0 1.346 1.349 2.438 3.014 2.438h6.811c1.665 0 3.014-1.092 3.014-2.438v-3.372c0-1.347-1.349-2.438-3.014-2.438z"
                    opacity="0.48"
                ></path>
                <path
                    fill="#D0B6D1"
                    d="M181.69 183.058h-14.562c-.811 0-1.468.531-1.468 1.187v12.004c0 .655.657 1.187 1.468 1.187h14.562c.811 0 1.468-.532 1.468-1.187v-12.004c0-.656-.657-1.187-1.468-1.187z"
                ></path>
                <path
                    stroke="#fff"
                    strokeLinecap="round"
                    strokeMiterlimit="10"
                    strokeWidth="1.2"
                    d="M168.582 190.339h5.37M168.582 188.992h7.857M168.582 187.578h10.366M168.582 186.032h12.207M168.582 184.49h10.366"
                    opacity="0.81"
                ></path>
                <path fill="#DDD" d="M122.325 187.367H99.309v1.51h23.016v-1.51z"></path>
                <path fill="#D2CFD6" d="M486 481l-10.26-55H349.26L339 481h147z"></path>
                <path
                    fill="#fff"
                    d="M13.746 434c-3.65-.009-7.146-1.166-9.722-3.218C1.447 428.729 0 425.95 0 423.052V361h826v62.052c-.011 2.901-1.467 5.68-4.051 7.732-2.583 2.051-6.084 3.207-9.737 3.216H13.746z"
                ></path>
                <path
                    fill="#404040"
                    d="M823.923 359.684v62.357c0 2.734-1.339 5.356-3.723 7.289-2.384 1.933-5.618 3.019-8.989 3.019H14.914c-3.328-.053-6.498-1.162-8.828-3.09-2.33-1.927-3.636-4.519-3.635-7.218v-62.357h821.472zM826 358H0v64.007c0 3.175 1.552 6.22 4.317 8.468 2.765 2.249 6.516 3.516 10.43 3.525h796.464c3.922 0 7.684-1.264 10.457-3.513 2.774-2.249 4.332-5.299 4.332-8.48V358z"
                ></path>
                <path
                    fill="#404040"
                    d="M803.271 0H22.729a27.454 27.454 0 00-8.673 1.365c-2.751.91-5.254 2.247-7.365 3.936-2.11 1.69-3.787 3.698-4.935 5.91C.607 13.425.01 15.798 0 18.196V364h826V18.195c-.011-2.398-.607-4.771-1.756-6.983-1.148-2.213-2.825-4.22-4.935-5.91-2.111-1.69-4.614-3.028-7.365-3.937A27.458 27.458 0 00803.271 0z"
                ></path>
                <path fill="#fff" d="M795 23H30v316h765V23z"></path>
                <path
                    fill="#333"
                    d="M408.5 410c6.351 0 11.5-5.149 11.5-11.5s-5.149-11.5-11.5-11.5-11.5 5.149-11.5 11.5 5.149 11.5 11.5 11.5z"
                ></path>
                <path fill="#513C4A" d="M519.474 22H23v318.791h496.474V22z"></path>
                <path fill="#6B6B6B" d="M519.474 22H23v21.477h496.474V22z"></path>
                <path
                    fill="#E84D4D"
                    d="M47.003 37.317c3.211 0 5.815-2.057 5.815-4.595s-2.604-4.595-5.815-4.595c-3.21 0-5.813 2.057-5.813 4.595s2.602 4.595 5.813 4.595z"
                ></path>
                <path
                    fill="#F2DD77"
                    d="M68.64 37.317c3.211 0 5.814-2.057 5.814-4.595s-2.603-4.595-5.814-4.595c-3.21 0-5.814 2.057-5.814 4.595s2.603 4.595 5.814 4.595z"
                ></path>
                <path
                    fill="#4EB785"
                    d="M89.195 37.317c3.21 0 5.814-2.057 5.814-4.595s-2.603-4.595-5.814-4.595-5.814 2.057-5.814 4.595 2.603 4.595 5.814 4.595z"
                ></path>
                <path
                    fill="#706D84"
                    d="M52.962 62.015c2.559-.233 3.259-.533 3.259-1.232s-.722-1.43-2.712-1.83V57.82l2.427-2.862h-2.843v-2.263h4.483l.132 2.263-2.318 2.662c1.815.6 2.514 1.698 2.514 2.996 0 1.997-1.465 3.494-4.833 3.76l-.109-2.362zm6.67 2.096l-.153-2.03c2.187-2.33 3.28-3.86 3.28-5.358 0-1.498-.7-1.664-3.061-1.764l.153-2.396c3.565 0 4.614 1.53 4.614 3.328 0 1.797-1.093 3.794-2.886 5.857h3.04v2.23l-4.987.133zm-6.67 20.036c2.559-.233 3.259-.566 3.259-1.265s-.722-1.398-2.712-1.797v-1.132l2.427-2.895h-2.843v-2.23h4.483l.132 2.23-2.318 2.695c1.815.566 2.514 1.698 2.514 2.963 0 2.03-1.465 3.527-4.833 3.794l-.109-2.363zm6.67 2.096l-.153-2.03c2.187-2.363 3.28-3.86 3.28-5.358 0-1.498-.7-1.664-3.061-1.764l.153-2.43c3.565 0 4.614 1.565 4.614 3.329 0 1.764-1.093 3.827-2.886 5.89h3.04v2.23l-4.987.133zm-6.67 20.036c2.559-.233 3.259-.566 3.259-1.265s-.722-1.398-2.712-1.797v-1.132l2.427-2.895h-2.843v-2.23h4.483l.132 2.23-2.318 2.696c1.815.565 2.514 1.697 2.514 2.962 0 2.03-1.465 3.527-4.833 3.794l-.109-2.363zm11.263.299v1.964h-1.597v-1.964H59.48a57.84 57.84 0 01.722-9.585l1.837.167-1.203 7.188h1.793v-3.76l1.597-.267v3.861h.809l-.153 2.23-.656.166zm-11.263 21.833c2.559-.267 3.259-.566 3.259-1.265s-.722-1.431-2.712-1.797v-1.165l2.427-2.862h-2.843v-2.263h4.483l.132 2.263-2.318 2.696c1.815.565 2.514 1.697 2.514 2.962 0 1.997-1.465 3.528-4.833 3.76l-.109-2.329zm6.758 2.363v-2.397c2.558-.299 3.346-.665 3.346-1.63 0-.965-.853-1.398-3.15-1.798l.241-5.89h4.374l-.131 2.296h-2.865v1.964c2.427.565 3.149 1.863 3.149 3.328-.087 2.097-1.53 3.827-4.964 4.127zm-6.758 19.736c2.559-.233 3.259-.533 3.259-1.232s-.722-1.431-2.712-1.83v-1.132l2.427-2.862h-2.843v-2.263h4.483l.132 2.263-2.318 2.696c1.815.565 2.514 1.697 2.514 2.962 0 1.997-1.465 3.494-4.833 3.76l-.109-2.362zm6.386-2.164c0-3.328 1.225-5.757 4.002-7.555l.7 2.164c-1.837 1.031-2.603 2.03-2.909 3.328 1.706-1.498 3.652-.266 3.652 2.662a6.054 6.054 0 01-.234 1.644c-.151.518-.37.984-.643 1.369-.274.384-.596.68-.947.868a1.877 1.877 0 01-1.095.227 2.072 2.072 0 01-1.065-.451 3.35 3.35 0 01-.86-1.057 5.16 5.16 0 01-.515-1.488 6.262 6.262 0 01-.086-1.677v-.034zm3.849.766c0-1.598-.897-2.23-2.187-1.332v.3c0 1.964.547 2.762 1.225 2.762s.962-.565.962-1.73zm-10.235 23.53c2.559-.233 3.259-.533 3.259-1.232s-.722-1.431-2.712-1.83v-1.132l2.427-2.862h-2.843v-2.263h4.483l.132 2.263-2.318 2.662c1.815.599 2.514 1.698 2.514 2.996 0 1.997-1.465 3.494-4.833 3.761l-.109-2.363zm7.239 1.996a57.136 57.136 0 012.865-8.886h-3.5l.132-2.329h5.095v2.263a63.453 63.453 0 00-2.843 9.319l-1.75-.367zm-7.239 20.136c2.559-.233 3.259-.566 3.259-1.265s-.722-1.398-2.712-1.797v-1.132l2.427-2.895h-2.843v-2.23h4.483l.132 2.23-2.318 2.695c1.815.566 2.514 1.698 2.514 2.963 0 2.03-1.465 3.527-4.833 3.794l-.109-2.363zm6.386-.566c.4-.19.752-.565 1.006-1.073a4.175 4.175 0 00.408-1.763 4.301 4.301 0 00-.341-1.796c-.234-.53-.571-.935-.964-1.159 0-1.598.919-3.328 2.668-3.328 1.378 0 2.472 1.098 2.472 2.795a4.55 4.55 0 01-.4 1.721c-.235.505-.559.901-.934 1.142.787.699 1.487 1.564 1.487 2.962 0 1.397-1.072 3.328-2.843 3.328-1.772 0-2.56-1.065-2.56-2.829zm3.74 0c0-.832-.7-1.465-1.488-2.13-.186.194-.34.452-.45.752-.11.3-.173.635-.184.978 0 .832.328 1.465 1.094 1.465.765 0 1.05-.566 1.05-1.165l-.022.1zm-.7-4.027c.171-.181.314-.419.416-.696a2.95 2.95 0 00.174-.902c0-.765-.262-1.331-.962-1.331s-.919.466-.919.965c0 .499.613 1.298 1.313 1.864l-.022.1zm-9.426 26.725c2.559-.233 3.259-.566 3.259-1.265s-.722-1.431-2.712-1.797v-1.165l2.427-2.862h-2.843v-2.23h4.483l.132 2.23-2.318 2.695c1.815.566 2.514 1.698 2.514 2.963 0 1.996-1.465 3.527-4.833 3.794l-.109-2.363zm7.108.332c1.837-1.065 2.602-2.03 2.908-3.328-1.706 1.465-3.652.267-3.652-2.662a6.05 6.05 0 01.235-1.644c.15-.518.37-.984.643-1.368.273-.385.595-.681.946-.869a1.877 1.877 0 011.096-.227c.371.038.734.192 1.065.451.33.26.623.619.86 1.057.236.437.412.944.515 1.488.103.545.132 1.115.085 1.678 0 3.328-1.224 5.757-4.002 7.555l-.7-2.131zm3.083-4.825v-.3c0-1.963-.547-2.762-1.224-2.762-.678 0-1.007.566-1.007 1.697 0 1.631.897 2.23 2.231 1.365zm-5.642 26.758v1.963h-1.597v-1.963h-3.127a57.817 57.817 0 01.722-9.585l1.837.166-1.203 7.189h1.793v-3.594l1.597-.267v3.861h.787l-.131 2.23h-.678zm1.706-3.561c0-3.695 1.115-6.157 2.93-6.157 1.815 0 2.756 2.163 2.756 5.757 0 3.595-1.116 6.157-2.953 6.157-1.837 0-2.733-2.163-2.733-5.757zm1.64-.233l2.296-1.797c-.175-1.265-.547-2.031-1.115-2.031-.569 0-1.181 1.265-1.181 3.595v.233zm2.406.299l-2.187 1.764c.175 1.232.524 1.964 1.093 1.964s1.094-1.398 1.094-3.728zm-5.752 25.627v1.93h-1.597v-1.93h-3.127a57.326 57.326 0 01.722-9.585l1.837.166-1.203 7.189h1.793v-3.594l1.597-.267v3.861h.787l-.131 2.23h-.678zm2.034 1.93v-2.163h1.99v-5.858h-1.772v-1.897l1.772-.299v-1.365l1.662-.199v9.585h1.793l-.131 2.163-5.314.033zm-2.034 20.169v1.963h-1.597v-1.963h-3.127a57.165 57.165 0 01.722-9.552l1.837.166-1.203 7.156h1.793v-3.561l1.597-.267v3.828h.787l-.131 2.23h-.678zm2.121 1.963l-.153-2.03c2.187-2.363 3.28-3.861 3.28-5.358 0-1.498-.7-1.664-3.061-1.764l.153-2.43c3.565 0 4.614 1.565 4.614 3.495 0 1.93-1.093 3.794-2.886 5.857h3.04v2.23h-4.987zm-2.121 20.169v1.963h-1.597v-1.963h-3.127a57.817 57.817 0 01.722-9.585l1.837.166-1.203 7.189h1.793v-3.694l1.597-.233v3.827h.787l-.131 2.23-.678.1zm2.165-.133c2.559-.233 3.258-.566 3.258-1.265s-.721-1.398-2.711-1.797v-1.132l2.427-2.895h-2.843v-2.23h4.374l.131 2.23-2.318 2.695c1.815.566 2.515 1.698 2.515 2.962 0 2.031-1.465 3.528-4.833 3.795v-2.363zm-2.165 22.265v1.897h-1.597v-1.964h-3.127a57.825 57.825 0 01.722-9.585l1.837.167-1.203 7.188h1.793v-3.594l1.597-.266v3.86h.787l-.131 2.23-.678.067zm6.714 0v1.897h-1.597v-1.964H59.48a57.836 57.836 0 01.722-9.585l1.837.167-1.203 7.188h1.793v-3.594l1.597-.266v3.86h.809l-.153 2.23-.656.067z"
                ></path>
                <path
                    fill="#A3848D"
                    d="M389.696 53.966H95.01v10.222h294.686V53.966z"
                    opacity="0.39"
                ></path>
                <path
                    fill="#A58492"
                    d="M408.8 75.909H95.01V86.13H408.8V75.91z"
                    opacity="0.39"
                ></path>
                <path
                    fill="#A284A3"
                    d="M350.743 98.052H95.01v10.222h255.733V98.052z"
                    opacity="0.39"
                ></path>
                <path
                    fill="#9084A0"
                    d="M313.782 120.394H95.01v10.223h218.772v-10.223z"
                    opacity="0.39"
                ></path>
                <path
                    fill="#83859E"
                    d="M276.407 142.304H95.01v10.223h181.397v-10.223z"
                    opacity="0.39"
                ></path>
                <path
                    fill="#83929B"
                    d="M398.5 164.614H95.01v10.222H398.5v-10.222z"
                    opacity="0.39"
                ></path>
                <path
                    fill="#829995"
                    d="M450.993 187.456H95.01v10.222h355.983v-10.222z"
                    opacity="0.39"
                ></path>
                <path
                    fill="#84998B"
                    d="M392.105 208.9H95.01v10.222h297.095V208.9z"
                    opacity="0.39"
                ></path>
                <path
                    fill="#899985"
                    d="M375.411 231.043H95.01v10.222H375.41v-10.222z"
                    opacity="0.39"
                ></path>
                <path
                    fill="#979987"
                    d="M228.316 252.986H95.01v10.222h133.306v-10.222z"
                    opacity="0.39"
                ></path>
                <path
                    fill="#999488"
                    d="M483.219 275.129H95.009v10.222h388.21v-10.222z"
                    opacity="0.39"
                ></path>
                <path
                    fill="#998E8A"
                    d="M375.411 297.271H95.01v10.222H375.41v-10.222z"
                    opacity="0.39"
                ></path>
                <path
                    fill="#998C8C"
                    d="M302.283 319.414H94.516v10.222h207.767v-10.222z"
                    opacity="0.39"
                ></path>
                <path
                    fill="#333"
                    d="M796.678 42.825H339.775v299.251h456.903V42.825z"
                ></path>
                <path
                    fill="#D3D3D3"
                    d="M346.03 22h442.589c2.138 0 4.189.36 5.7 1.001 1.512.64 2.361 1.51 2.361 2.417v17.407H339V24.98c0-.79.741-1.549 2.059-2.108 1.319-.559 3.106-.873 4.971-.873z"
                ></path>
                <path
                    fill="#E84D4D"
                    d="M360.886 36.549c2.933 0 5.31-2.3 5.31-5.135 0-2.836-2.377-5.135-5.31-5.135-2.932 0-5.31 2.3-5.31 5.135 0 2.836 2.378 5.135 5.31 5.135z"
                ></path>
                <path
                    fill="#F2DD77"
                    d="M375.65 36.549c2.932 0 5.309-2.3 5.309-5.135 0-2.836-2.377-5.135-5.309-5.135-2.933 0-5.31 2.3-5.31 5.135 0 2.836 2.377 5.135 5.31 5.135z"
                ></path>
                <path
                    fill="#4EB785"
                    d="M391.062 36.549c3.004 0 5.44-2.3 5.44-5.135 0-2.836-2.436-5.135-5.44-5.135-3.004 0-5.439 2.3-5.439 5.135 0 2.836 2.435 5.135 5.439 5.135z"
                ></path>
                <path fill="#EAEAEA" d="M499 481H331v14h168v-14z"></path>
            </svg>
            <Screen>
                {forceRender && <InfoCounter
                    initialState={randomState}
                    render={() => setForceRender(false)}
                    speed={25}
                    deleteSpeed={25}
                    dashTimer={400}
                    timeToShow={1000}
                    timeToEnd={10000}
                    indicator={"_"}
                /> }
            </Screen>
        </div>
    );
}